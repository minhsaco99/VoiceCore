<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 1000 850" style="background-color: #0f172a;">
  <defs>
    <!-- Gradients -->
    <linearGradient id="card-grad" x1="0%" y1="0%" x2="0%" y2="100%">
      <stop offset="0%" stop-color="#1e293b" stop-opacity="1" />
      <stop offset="100%" stop-color="#0f172a" stop-opacity="1" />
    </linearGradient>

    <!-- Filters for Glassmorphism/Depth -->
    <filter id="shadow" x="-20%" y="-20%" width="140%" height="140%">
      <feDropShadow dx="0" dy="8" stdDeviation="12" flood-color="#000000" flood-opacity="0.4"/>
    </filter>
  </defs>

  <style>
    /* Global Text Font */
    text { font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, Helvetica, Arial, sans-serif; }

    /* Keyframes for animation */
    @keyframes flow {
      to { stroke-dashoffset: -12; }
    }

    /* Base text styles */
    .title { fill: #f8fafc; font-weight: 700; font-size: 18px; text-anchor: middle; }
    .subtitle { fill: #94a3b8; font-weight: 600; font-size: 11px; letter-spacing: 1px; text-transform: uppercase; }
    .body { fill: #94a3b8; font-size: 13px; font-weight: 400; text-anchor: middle; }
    .code { fill: #e2e8f0; font-family: monospace; font-size: 12px; }

    /* Card styles */
    .card-bg { fill: url(#card-grad); stroke: #334155; stroke-width: 1; filter: url(#shadow); rx: 12; }

    /* Border accents */
    .border-client { stroke: #f1f5f9; stroke-width: 3; }
    .border-router { stroke: #3b82f6; stroke-width: 3; }
    .border-manager { stroke: #8b5cf6; stroke-width: 3; }
    .border-impl { stroke: #10b981; stroke-width: 3; }
    .border-config { stroke: #f43f5e; stroke-width: 3; }

    /* Lines */
    .conn-line { fill: none; stroke: #475569; stroke-width: 2; }
    .flow-line { fill: none; stroke: #475569; stroke-width: 2; stroke-dasharray: 8 4; animation: flow 1s linear infinite; }

    /* Interface styles */
    .interface-bg { fill: rgba(245, 158, 11, 0.05); stroke: #f59e0b; stroke-dasharray: 5; rx: 12; }

    /* Groups */
    .group-box { fill: rgba(30, 41, 59, 0.3); stroke: #475569; stroke-width: 1.5; stroke-dasharray: 6; rx: 16; }

    /* Badges */
    .badge { fill: rgba(255,255,255,0.08); rx: 4; }
    .badge-txt { fill: #cbd5e1; font-size: 10px; font-weight: 600; text-anchor: middle; }
  </style>

  <!-- BACKGROUND LINES -->
  <!-- Client -> Router -->
  <path d="M 250 150 C 250 180, 420 180, 420 220" class="conn-line" />

  <!-- Config -> Manager -->
  <path d="M 750 150 C 750 300, 520 300, 500 380" class="conn-line" />

  <!-- Router -> Manager -->
  <path d="M 420 330 C 420 360, 420 360, 420 380" class="conn-line" />

  <!-- Manager -> Interfaces -->
  <path d="M 380 480 C 380 510, 250 510, 250 540" class="conn-line" />
  <path d="M 460 480 C 460 510, 590 510, 590 540" class="conn-line" />

  <!-- Interfaces -> Plugins -->
  <path d="M 250 670 C 250 700, 250 700, 250 720" class="flow-line" />
  <path d="M 590 670 C 590 700, 590 700, 590 720" class="flow-line" />

  <!-- COMPONENTS -->

  <!-- 1. Client App -->
  <g transform="translate(130, 40)">
    <rect width="240" height="110" class="card-bg" />
    <line x1="0" y1="0" x2="240" y2="0" class="border-client" />
    <text x="20" y="25" class="subtitle">EXTERNAL</text>
    <text x="120" y="55" class="title">üì± Client Application</text>

    <!-- Badges -->
    <g transform="translate(45, 75)">
      <rect width="40" height="20" class="badge" />
      <text x="20" y="14" class="badge-txt">REST</text>
    </g>
    <g transform="translate(95, 75)">
      <rect width="50" height="20" class="badge" />
      <text x="25" y="14" class="badge-txt">WebSock</text>
    </g>
    <g transform="translate(155, 75)">
      <rect width="40" height="20" class="badge" />
      <text x="20" y="14" class="badge-txt">SSE</text>
    </g>
  </g>

  <!-- 2. Config -->
  <g transform="translate(630, 40)">
    <rect width="240" height="110" class="card-bg" />
    <line x1="0" y1="0" x2="0" y2="110" class="border-config" />
    <text x="20" y="25" class="subtitle">CONFIGURATION</text>
    <text x="120" y="55" class="title" style="font-family: monospace">engines.yaml</text>
    <text x="120" y="80" class="body">Defines enabled engines</text>
    <text x="120" y="96" class="body">&amp; parameters</text>
  </g>

  <!-- GROUP: Voice Engine API -->
  <rect x="80" y="200" width="680" height="490" class="group-box" />
  <text x="110" y="190" class="subtitle" font-size="14">VOICE ENGINE API</text>

  <!-- 3. Router -->
  <g transform="translate(300, 220)">
    <rect width="240" height="110" class="card-bg" />
    <line x1="0" y1="0" x2="240" y2="0" class="border-router" />
    <text x="120" y="25" class="subtitle" text-anchor="middle">API LAYER</text>
    <text x="120" y="55" class="title">üöÄ FastAPI Router</text>
    <text x="120" y="85" class="body">Validation ‚Ä¢ Auth</text>
    <text x="120" y="100" class="body">Async Context</text>
  </g>

  <!-- 4. Manager -->
  <g transform="translate(300, 380)">
    <rect width="240" height="110" class="card-bg" />
    <line x1="0" y1="0" x2="240" y2="0" class="border-manager" />
    <text x="120" y="25" class="subtitle" text-anchor="middle">CORE LOGIC</text>
    <text x="120" y="55" class="title">‚öôÔ∏è Engine Manager</text>
    <text x="120" y="80" class="body">Lifecycle ‚Ä¢ Loading</text>
    <text x="120" y="96" class="body">Error Handling</text>
  </g>

  <!-- 5. Interfaces -->
  <!-- STT Interface -->
  <g transform="translate(130, 540)">
    <rect width="240" height="130" class="interface-bg" />
    <text x="120" y="25" class="subtitle" text-anchor="middle" fill="#f59e0b">INTERFACE</text>
    <text x="120" y="50" class="title" font-size="16">BaseSTTEngine</text>
    <!-- Method Bubbles -->
    <rect x="25" y="65" width="190" height="20" rx="4" fill="rgba(0,0,0,0.2)" />
    <text x="120" y="79" class="code" text-anchor="middle" fill="#e2e8f0">transcribe()</text>
    <rect x="25" y="95" width="190" height="20" rx="4" fill="rgba(0,0,0,0.2)" />
    <text x="120" y="109" class="code" text-anchor="middle" fill="#e2e8f0">transcribe_stream()</text>
  </g>

  <!-- TTS Interface -->
  <g transform="translate(470, 540)">
    <rect width="240" height="130" class="interface-bg" />
    <text x="120" y="25" class="subtitle" text-anchor="middle" fill="#f59e0b">INTERFACE</text>
    <text x="120" y="50" class="title" font-size="16">BaseTTSEngine</text>
    <rect x="25" y="65" width="190" height="20" rx="4" fill="rgba(0,0,0,0.2)" />
    <text x="120" y="79" class="code" text-anchor="middle" fill="#e2e8f0">synthesize()</text>
    <rect x="25" y="95" width="190" height="20" rx="4" fill="rgba(0,0,0,0.2)" />
    <text x="120" y="109" class="code" text-anchor="middle" fill="#e2e8f0">synthesize_stream()</text>
  </g>

  <!-- 6. Plugins -->
  <!-- STT Plugin -->
  <g transform="translate(130, 720)">
    <rect width="240" height="100" class="card-bg" />
    <line x1="0" y1="0" x2="240" y2="0" class="border-impl" />
    <text x="120" y="25" class="subtitle" text-anchor="middle">PLUGIN IMPLEMENTATION</text>
    <text x="120" y="55" class="title">Concrete STT</text>
    <text x="120" y="80" class="body">Wraps library</text>
    <text x="120" y="96" class="body">(e.g. faster-whisper)</text>
  </g>

  <!-- TTS Plugin -->
  <g transform="translate(470, 720)">
    <rect width="240" height="100" class="card-bg" />
    <line x1="0" y1="0" x2="240" y2="0" class="border-impl" />
    <text x="120" y="25" class="subtitle" text-anchor="middle">PLUGIN IMPLEMENTATION</text>
    <text x="120" y="55" class="title">Concrete TTS</text>
    <text x="120" y="80" class="body">Wraps library</text>
    <text x="120" y="96" class="body">(e.g. Coqui, OpenAI)</text>
  </g>

</svg>
